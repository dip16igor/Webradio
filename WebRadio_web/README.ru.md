[Read in English](README.md)

# Веб-интерфейс для WebRadio

Это веб-пульт для управления проектом ESP32 WebRadio. Он предоставляет удобный интерфейс для управления радио с любого устройства с веб-браузером.

## Возможности

- **Отображение статуса в реальном времени**: Показывает текущую станцию, название трека, уровень громкости и статус подключения.
- **Управление воспроизведением**: Управление питанием, громкостью и выбор предустановленных радиостанций.
- **Управление будильником**: Установка и отмена будильников.
- **Адаптивный дизайн**: Интерфейс хорошо работает как на настольных, так и на мобильных браузерах.

## Стек технологий

- **Фронтенд**: HTML, CSS, JavaScript (без фреймворков)
- **Бэкенд**: Node.js с Express.js
- **Обмен данными в реальном времени**: WebSocket (с мостом на MQTT)
- **Развертывание**: Docker, Docker Compose, Traefik (рекомендуется)

## Установка и запуск (Docker)

Проект предназначен для запуска в Docker-контейнере, что значительно упрощает развертывание и повышает безопасность.

### Требования
- Docker
- Docker Compose

### Шаги для запуска

1.  **Клонируйте репозиторий** на ваш сервер.

2.  **Создайте файл конфигурации** `.env` из примера:
    ```bash
    cp .env.example .env
    ```

3.  **Настройте переменные в `.env`**:
    Откройте файл `.env` и укажите ваши значения.
    ```dotenv
    # Секретный токен для доступа к WebSocket и API. Должен быть длинной, сложной и случайной строкой.
    SECRET_TOKEN=ваш_супер_секретный_токен

    # URL вашего MQTT-брокера.
    # Если брокер запущен на том же хосте, что и Docker, используйте host.docker.internal
    MQTT_BROKER_URL=mqtt://host.docker.internal:1883

    # Данные для подключения к MQTT (если требуются)
    MQTT_USER=ваше_имя_пользователя_mqtt
    MQTT_PASSWORD=ваш_пароль_mqtt
    ```

4.  **Соберите и запустите контейнер**:
    Выполните эту команду из корневой папки проекта:
    ```bash
    sudo docker compose up -d --build
    ```
    Приложение будет доступно по адресу, который вы настроили в вашем реверс-прокси (например, Traefik).

## Первое использование и аутентификация

При первом входе на сайт, браузер запросит у вас секретный токен. 

1.  Скопируйте значение `SECRET_TOKEN` из вашего `.env` файла.
2.  Вставьте его в появившееся окно в браузере.

Браузер запомнит токен для последующих сессий.

## Безопасность

В проекте реализованы следующие меры безопасности:

- **Аутентификация**: Все конечные точки API и WebSocket защищены секретным токеном.
- **Изоляция контейнера**: Приложение запускается в Docker-контейнере от имени пользователя с ограниченными правами (`node`), а не от `root`.
- **Заголовки безопасности**: Используется библиотека `helmet` для установки стандартных защитных HTTP-заголовков, что помогает противостоять XSS-атакам и кликджекингу.